# Networking


## checklist 
- [ ] Must not forget running `nmap` scans on all ports.
- [ ] Must not forget running `nmap` scans on UDP too with `-sU` option.
- [ ] Checking vulnerabilities using `--script "vuln"`option in `nmap` (NSE scripts)


## Notes on `nmap`

- [ ] On nmap, SYN scan (stealth) is the default scan option (to be used with sudo). 
- [ ] Upon receiving the ACK, a SYN scan does not bother anymore, and doesn't send the SYN-ACK to complete the three-way handshake. By doing so, the information is not passed to the application layer (only?) and thus isn't registered on any logs. `-sS` option. 
- [ ] A complete TCP scan is done with `-sT`
- [ ] `-sU`, for UDP scanning 
- [ ] OS fingerprinting : `sudo nmap -O <IP> --osscan-guess`
- [ ] Printing service banners with `-A` or with `-sV`: `nmap -sT -A <IP>`
- [ ] We can add NSE scripts that we can find on the internet specific to certains CVEs. 

## Connection testing on Windows (or scanning) with `Test-NetConnection`

`Test-NetConnection` function checks if an IP responds to ICMP and if the TCP port is open. 
Usage : 
```powershell
PS > Test-NetConnection -Port <Port> <IP>
```

### Powershell one-liner for scanning multiple ports 

```powershell
1..1024 |  % {echo ((New-Object Net.Sockets.TcpClient).Connect("IP", $_)) "TCP Port $_ is open"} 2>$null
```

